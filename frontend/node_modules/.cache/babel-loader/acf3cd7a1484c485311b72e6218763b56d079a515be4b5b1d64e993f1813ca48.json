{"ast":null,"code":"import PropTypes from'prop-types';import{useState}from'react';import{Icon}from'../../../../components';import{TableRow}from'../table-row/table-row';import{useServerRequest}from'../../../../hooks';import{PROP_TYPE}from'../../../../constants';import styled from'styled-components';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserRowContainer=_ref=>{let{className,id,login,registeredAt,roleId:userRoleId,roles,onUserRemove}=_ref;const[selectedRoleId,setSelectedRoleId]=useState(userRoleId);const[initialRoleId,setInitialRoleId]=useState(userRoleId);const requestServer=useServerRequest();const onRoleChange=_ref2=>{let{target}=_ref2;setSelectedRoleId(+target.value);};const onRoleSave=(userId,newUserRoleId)=>{requestServer('updateUserRole',userId,newUserRoleId).then(()=>setInitialRoleId(newUserRoleId));};const isSaveButtonDisabled=selectedRoleId===initialRoleId;return/*#__PURE__*/_jsxs(\"div\",{className:className,children:[/*#__PURE__*/_jsxs(TableRow,{border:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-column\",children:login}),/*#__PURE__*/_jsx(\"div\",{className:\"registered-at-column\",children:registeredAt}),/*#__PURE__*/_jsxs(\"div\",{className:\"role-id-column\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedRoleId,onChange:onRoleChange,children:[roles.map(_ref3=>{let{id:roleId,name:roleName}=_ref3;return/*#__PURE__*/_jsx(\"option\",{value:roleId,children:roleName},roleId);}),/*#__PURE__*/_jsx(\"option\",{})]}),/*#__PURE__*/_jsx(Icon,{id:\"fa-floppy-o\",margin:\"0 0 0 0\",disabled:isSaveButtonDisabled,onClick:()=>onRoleSave(id,selectedRoleId)})]})]}),/*#__PURE__*/_jsx(Icon,{id:\"fa-trash-o\",margin:\"0 0 0 10px\",onClick:onUserRemove})]});};export const UserRow=styled(UserRowContainer)`\n\tdisplay: flex;\n\tmargin-top: 10px;\n\n\tselect {\n\t\tfont-size: 16px;\n\t\tpadding: 5px;\n\t}\n`;UserRow.propTypes={id:PropTypes.string.isRequired,login:PropTypes.string.isRequired,registeredAt:PropTypes.string.isRequired,roleId:PROP_TYPE.ROLE_ID.isRequired,roles:PropTypes.arrayOf(PROP_TYPE.ROLE).isRequired,onUserRemove:PropTypes.func.isRequired};","map":{"version":3,"names":["PropTypes","useState","Icon","TableRow","useServerRequest","PROP_TYPE","styled","jsx","_jsx","jsxs","_jsxs","UserRowContainer","_ref","className","id","login","registeredAt","roleId","userRoleId","roles","onUserRemove","selectedRoleId","setSelectedRoleId","initialRoleId","setInitialRoleId","requestServer","onRoleChange","_ref2","target","value","onRoleSave","userId","newUserRoleId","then","isSaveButtonDisabled","children","border","onChange","map","_ref3","name","roleName","margin","disabled","onClick","UserRow","propTypes","string","isRequired","ROLE_ID","arrayOf","ROLE","func"],"sources":["/Users/evgeniapodoprigora/Desktop/practice/frontend/src/pages/users/components/user-row/user-row.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { useState } from 'react';\n\nimport { Icon } from '../../../../components';\nimport { TableRow } from '../table-row/table-row';\nimport { useServerRequest } from '../../../../hooks';\nimport { PROP_TYPE } from '../../../../constants';\n\nimport styled from 'styled-components';\n\nconst UserRowContainer = ({\n\tclassName,\n\tid,\n\tlogin,\n\tregisteredAt,\n\troleId: userRoleId,\n\troles,\n\tonUserRemove,\n}) => {\n\tconst [selectedRoleId, setSelectedRoleId] = useState(userRoleId);\n\tconst [initialRoleId, setInitialRoleId] = useState(userRoleId);\n\tconst requestServer = useServerRequest();\n\n\tconst onRoleChange = ({ target }) => {\n\t\tsetSelectedRoleId(+target.value);\n\t};\n\n\tconst onRoleSave = (userId, newUserRoleId) => {\n\t\trequestServer('updateUserRole', userId, newUserRoleId).then(() =>\n\t\t\tsetInitialRoleId(newUserRoleId),\n\t\t);\n\t};\n\n\tconst isSaveButtonDisabled = selectedRoleId === initialRoleId;\n\treturn (\n\t\t<div className={className}>\n\t\t\t<TableRow border>\n\t\t\t\t<div className=\"login-column\">{login}</div>\n\t\t\t\t<div className=\"registered-at-column\">{registeredAt}</div>\n\t\t\t\t<div className=\"role-id-column\">\n\t\t\t\t\t<select value={selectedRoleId} onChange={onRoleChange}>\n\t\t\t\t\t\t{roles.map(({ id: roleId, name: roleName }) => (\n\t\t\t\t\t\t\t<option key={roleId} value={roleId}>\n\t\t\t\t\t\t\t\t{roleName}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<option></option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tid=\"fa-floppy-o\"\n\t\t\t\t\t\tmargin=\"0 0 0 0\"\n\t\t\t\t\t\tdisabled={isSaveButtonDisabled}\n\t\t\t\t\t\tonClick={() => onRoleSave(id, selectedRoleId)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</TableRow>\n\t\t\t<Icon id=\"fa-trash-o\" margin=\"0 0 0 10px\" onClick={onUserRemove} />\n\t\t</div>\n\t);\n};\n\nexport const UserRow = styled(UserRowContainer)`\n\tdisplay: flex;\n\tmargin-top: 10px;\n\n\tselect {\n\t\tfont-size: 16px;\n\t\tpadding: 5px;\n\t}\n`;\n\nUserRow.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tlogin: PropTypes.string.isRequired,\n\tregisteredAt: PropTypes.string.isRequired,\n\troleId: PROP_TYPE.ROLE_ID.isRequired,\n\troles: PropTypes.arrayOf(PROP_TYPE.ROLE).isRequired,\n\tonUserRemove: PropTypes.func.isRequired,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}