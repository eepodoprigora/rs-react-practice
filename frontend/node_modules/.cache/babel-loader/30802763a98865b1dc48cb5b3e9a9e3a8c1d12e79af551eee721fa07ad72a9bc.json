{"ast":null,"code":"import{addComment,getPost}from'../api';import{ROLE}from'../constants';import{sessions}from'../sessions';import{getPostCommentsWithAuthor}from'../utils';export const addPostComment=async(hash,userId,postId,content)=>{const accessRoles=[ROLE.ADMIN,ROLE.MODERATOR,ROLE.READER];const access=await sessions.access(hash,accessRoles);if(!access){return{error:'Доступ запрещен',res:null};}await addComment(userId,postId,content);const post=await getPost(postId);const commentsWithAuthor=await getPostCommentsWithAuthor(postId);return{error:null,res:{...post,comments:commentsWithAuthor}};};","map":{"version":3,"names":["addComment","getPost","ROLE","sessions","getPostCommentsWithAuthor","addPostComment","hash","userId","postId","content","accessRoles","ADMIN","MODERATOR","READER","access","error","res","post","commentsWithAuthor","comments"],"sources":["/Users/evgeniapodoprigora/Desktop/practice/frontend/src/bff/operations/add-post-comment.js"],"sourcesContent":["import { addComment, getPost } from '../api';\nimport { ROLE } from '../constants';\nimport { sessions } from '../sessions';\nimport { getPostCommentsWithAuthor } from '../utils';\n\nexport const addPostComment = async (hash, userId, postId, content) => {\n\tconst accessRoles = [ROLE.ADMIN, ROLE.MODERATOR, ROLE.READER];\n\n\tconst access = await sessions.access(hash, accessRoles);\n\n\tif (!access) {\n\t\treturn {\n\t\t\terror: 'Доступ запрещен',\n\t\t\tres: null,\n\t\t};\n\t}\n\n\tawait addComment(userId, postId, content);\n\n\tconst post = await getPost(postId);\n\n\tconst commentsWithAuthor = await getPostCommentsWithAuthor(postId);\n\n\treturn {\n\t\terror: null,\n\t\tres: { ...post, comments: commentsWithAuthor },\n\t};\n};\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,OAAO,KAAQ,QAAQ,CAC5C,OAASC,IAAI,KAAQ,cAAc,CACnC,OAASC,QAAQ,KAAQ,aAAa,CACtC,OAASC,yBAAyB,KAAQ,UAAU,CAEpD,MAAO,MAAM,CAAAC,cAAc,CAAG,KAAAA,CAAOC,IAAI,CAAEC,MAAM,CAAEC,MAAM,CAAEC,OAAO,GAAK,CACtE,KAAM,CAAAC,WAAW,CAAG,CAACR,IAAI,CAACS,KAAK,CAAET,IAAI,CAACU,SAAS,CAAEV,IAAI,CAACW,MAAM,CAAC,CAE7D,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAX,QAAQ,CAACW,MAAM,CAACR,IAAI,CAAEI,WAAW,CAAC,CAEvD,GAAI,CAACI,MAAM,CAAE,CACZ,MAAO,CACNC,KAAK,CAAE,iBAAiB,CACxBC,GAAG,CAAE,IACN,CAAC,CACF,CAEA,KAAM,CAAAhB,UAAU,CAACO,MAAM,CAAEC,MAAM,CAAEC,OAAO,CAAC,CAEzC,KAAM,CAAAQ,IAAI,CAAG,KAAM,CAAAhB,OAAO,CAACO,MAAM,CAAC,CAElC,KAAM,CAAAU,kBAAkB,CAAG,KAAM,CAAAd,yBAAyB,CAACI,MAAM,CAAC,CAElE,MAAO,CACNO,KAAK,CAAE,IAAI,CACXC,GAAG,CAAE,CAAE,GAAGC,IAAI,CAAEE,QAAQ,CAAED,kBAAmB,CAC9C,CAAC,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}