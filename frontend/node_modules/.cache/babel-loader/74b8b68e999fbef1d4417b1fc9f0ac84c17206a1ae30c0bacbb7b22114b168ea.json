{"ast":null,"code":"import{sessions}from'../sessions';import{ROLE}from'../constants';import{addPost,updatePost}from'../api';export const savePost=async(hash,newPostData)=>{const accessRoles=[ROLE.ADMIN];const access=await sessions.access(hash,accessRoles);if(!access){return{error:'Доступ запрещен',res:null};}const savedPost=newPostData.id===''?await addPost(newPostData):await updatePost(newPostData);return{error:null,res:savedPost};};","map":{"version":3,"names":["sessions","ROLE","addPost","updatePost","savePost","hash","newPostData","accessRoles","ADMIN","access","error","res","savedPost","id"],"sources":["/Users/evgeniapodoprigora/Desktop/practice/frontend/src/bff/operations/save-post.js"],"sourcesContent":["import { sessions } from '../sessions';\nimport { ROLE } from '../constants';\nimport { addPost, updatePost } from '../api';\n\nexport const savePost = async (hash, newPostData) => {\n\tconst accessRoles = [ROLE.ADMIN];\n\tconst access = await sessions.access(hash, accessRoles);\n\n\tif (!access) {\n\t\treturn {\n\t\t\terror: 'Доступ запрещен',\n\t\t\tres: null,\n\t\t};\n\t}\n\n\tconst savedPost =\n\t\tnewPostData.id === ''\n\t\t\t? await addPost(newPostData)\n\t\t\t: await updatePost(newPostData);\n\n\treturn {\n\t\terror: null,\n\t\tres: savedPost,\n\t};\n};\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,aAAa,CACtC,OAASC,IAAI,KAAQ,cAAc,CACnC,OAASC,OAAO,CAAEC,UAAU,KAAQ,QAAQ,CAE5C,MAAO,MAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAOC,IAAI,CAAEC,WAAW,GAAK,CACpD,KAAM,CAAAC,WAAW,CAAG,CAACN,IAAI,CAACO,KAAK,CAAC,CAChC,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAT,QAAQ,CAACS,MAAM,CAACJ,IAAI,CAAEE,WAAW,CAAC,CAEvD,GAAI,CAACE,MAAM,CAAE,CACZ,MAAO,CACNC,KAAK,CAAE,iBAAiB,CACxBC,GAAG,CAAE,IACN,CAAC,CACF,CAEA,KAAM,CAAAC,SAAS,CACdN,WAAW,CAACO,EAAE,GAAK,EAAE,CAClB,KAAM,CAAAX,OAAO,CAACI,WAAW,CAAC,CAC1B,KAAM,CAAAH,UAAU,CAACG,WAAW,CAAC,CAEjC,MAAO,CACNI,KAAK,CAAE,IAAI,CACXC,GAAG,CAAEC,SACN,CAAC,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}