{"ast":null,"code":"import { getUser } from './get-user';\nimport { addUser } from './add-user';\nimport { createSession } from './create-session';\nexport const server = {\n  async authorize(authLogin, authPassword) {\n    const user = await getUser(authLogin);\n    console.log(user, 'user12');\n    if (!user) {\n      return {\n        error: 'Такой пользователь не найден',\n        res: null\n      };\n    }\n    if (authPassword !== user.password) {\n      return {\n        error: 'Неверный пароль',\n        res: null\n      };\n    }\n    return {\n      error: null,\n      res: createSession(user.role_id)\n    };\n  },\n  async register(regLogin, regPassword) {\n    const user = await getUser(regLogin);\n    if (user) {\n      return {\n        error: 'Такой логин уже занят',\n        res: null\n      };\n    }\n    await addUser(regLogin, regPassword);\n    return {\n      error: null,\n      res: createSession(user.role_id)\n    };\n  }\n};","map":{"version":3,"names":["getUser","addUser","createSession","server","authorize","authLogin","authPassword","user","console","log","error","res","password","role_id","register","regLogin","regPassword"],"sources":["/Users/evgeniapodoprigora/Desktop/practice/src/bff/server.js"],"sourcesContent":["import { getUser } from './get-user';\nimport { addUser } from './add-user';\nimport { createSession } from './create-session';\n\nexport const server = {\n\tasync authorize(authLogin, authPassword) {\n\t\tconst user = await getUser(authLogin);\n\n\t\tconsole.log(user, 'user12');\n\n\t\tif (!user) {\n\t\t\treturn {\n\t\t\t\terror: 'Такой пользователь не найден',\n\t\t\t\tres: null,\n\t\t\t};\n\t\t}\n\t\tif (authPassword !== user.password) {\n\t\t\treturn {\n\t\t\t\terror: 'Неверный пароль',\n\t\t\t\tres: null,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\terror: null,\n\t\t\tres: createSession(user.role_id),\n\t\t};\n\t},\n\tasync register(regLogin, regPassword) {\n\t\tconst user = await getUser(regLogin);\n\n\t\tif (user) {\n\t\t\treturn {\n\t\t\t\terror: 'Такой логин уже занят',\n\t\t\t\tres: null,\n\t\t\t};\n\t\t}\n\n\t\tawait addUser(regLogin, regPassword);\n\n\t\treturn {\n\t\t\terror: null,\n\t\t\tres: createSession(user.role_id),\n\t\t};\n\t},\n};\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,YAAY;AACpC,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,aAAa,QAAQ,kBAAkB;AAEhD,OAAO,MAAMC,MAAM,GAAG;EACrB,MAAMC,SAASA,CAACC,SAAS,EAAEC,YAAY,EAAE;IACxC,MAAMC,IAAI,GAAG,MAAMP,OAAO,CAACK,SAAS,CAAC;IAErCG,OAAO,CAACC,GAAG,CAACF,IAAI,EAAE,QAAQ,CAAC;IAE3B,IAAI,CAACA,IAAI,EAAE;MACV,OAAO;QACNG,KAAK,EAAE,8BAA8B;QACrCC,GAAG,EAAE;MACN,CAAC;IACF;IACA,IAAIL,YAAY,KAAKC,IAAI,CAACK,QAAQ,EAAE;MACnC,OAAO;QACNF,KAAK,EAAE,iBAAiB;QACxBC,GAAG,EAAE;MACN,CAAC;IACF;IAEA,OAAO;MACND,KAAK,EAAE,IAAI;MACXC,GAAG,EAAET,aAAa,CAACK,IAAI,CAACM,OAAO;IAChC,CAAC;EACF,CAAC;EACD,MAAMC,QAAQA,CAACC,QAAQ,EAAEC,WAAW,EAAE;IACrC,MAAMT,IAAI,GAAG,MAAMP,OAAO,CAACe,QAAQ,CAAC;IAEpC,IAAIR,IAAI,EAAE;MACT,OAAO;QACNG,KAAK,EAAE,uBAAuB;QAC9BC,GAAG,EAAE;MACN,CAAC;IACF;IAEA,MAAMV,OAAO,CAACc,QAAQ,EAAEC,WAAW,CAAC;IAEpC,OAAO;MACNN,KAAK,EAAE,IAAI;MACXC,GAAG,EAAET,aAAa,CAACK,IAAI,CAACM,OAAO;IAChC,CAAC;EACF;AACD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}